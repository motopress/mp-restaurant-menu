!function(t){"use strict";tinymce.PluginManager.add("mp_restaurant_menu",function(n,e){function o(){t("[name=shortcode_name]").off("change").on("change",function(){MP_RM_Registry._get("MP_RM_Functions").showBlocks(t(this).val())})}function a(n){t("[data-selector=insert_shortcode]").off("click").on("click",function(){var e=c(t("[data-selector=shortcode-form]"));_.isFunction(n)&&n(e)})}function i(){t("[data-selector=shortcode-form]").find("input[type=checkbox]").off("change").on("change",function(){t(this).val(t(this).attr("checked")?"1":"")})}function c(n){var e={attrs:{},name:""};return n.find("[data-selector=data-line]").each(function(n,o){if(t(o).is(":visible")){var a=t(o).find("[data-selector=form_data]");a.length&&!_.isNull(a.val())&&""!==a.val()&&(_.isArray(a.val())?e.attrs[a.attr("name")]=a.val().join(","):e.attrs[a.attr("name")]=a.val())}}),e.name=t("[data-selector=shortcode_name]").val(),e}var r="Insert Restaurant Menu Shortcode";n.addButton("mp_add_menu",{title:r,image:e+"/../img/shortcode-icon.png",onclick:function(){MP_RM_Registry._get("MP_RM_Functions").callModal("",function(t){var e=this;MP_RM_Registry._get("MP_RM_Functions").wpAjax({controller:"popup",action:"get_shortcode_builder"},function(t){e.setContent(t),MP_RM_Registry._get("MP_RM_Functions").showBlocks("mprm_categories"),o(),i(),a(function(t){var o=wp.shortcode.string({tag:t.name,attrs:t.attrs,type:"single"});n.insertContent(o),e.close()})},function(t){console.warn(t)})},{title:r,width:500,height:600})}})})}(window.jQuery);
