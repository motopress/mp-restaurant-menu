!function(e){"use strict";tinymce.PluginManager.add("mp_restaurant_menu",function(t,n){function r(){e("[name=shortcode_name]").off("change").on("change",function(){MP_RM_Registry._get("MP_RM_Functions").showBlocks(e(this).val())})}function i(){e("#mprm-shortcode-form").on("change",'select[name="view"]',function(){var t=e('[name="shortcode_name"]').val();if("mprm_items"===t)switch(e(this).val()){case"simple-list":e('[name="item_ids"],[name="feat_img"],select[name="categ_name"]').parents(".mprm-line").addClass("hidden"),e('input[name="categ_name"],[name="price_pos"]').parents(".mprm-line").removeClass("hidden");break;case"grid":case"list":default:e('[name="item_ids"],[name="feat_img"],select[name="categ_name"]').parents(".mprm-line").removeClass("hidden"),e('input[name="categ_name"],[name="price_pos"]').parents(".mprm-line").addClass("hidden")}})}function a(t){e("[data-selector=insert_shortcode]").off("click").on("click",function(){var n=m(e("[data-selector=shortcode-form]"));_.isFunction(t)&&t(n)})}function o(){e("[data-selector=shortcode-form]").find("input[type=checkbox]").off("change").on("change",function(){e(this).val(e(this).attr("checked")?"1":"")})}function m(t){var n={attrs:{},name:""};return t.find("[data-selector=data-line]").each(function(t,r){if(e(r).is(":visible")){var i=e(r).find("[data-selector=form_data]");i.length&&!_.isNull(i.val())&&""!==i.val()&&(_.isArray(i.val())?n.attrs[i.attr("name")]=i.val().join(","):n.attrs[i.attr("name")]=i.val())}}),n.name=e("[data-selector=shortcode_name]").val(),n}var s="Insert Restaurant Menu Shortcode";t.addButton("mp_add_menu",{title:s,image:n+"/../img/shortcode-icon.png",onclick:function(){MP_RM_Registry._get("MP_RM_Functions").callModal("",function(e){var n=this;MP_RM_Registry._get("MP_RM_Functions").wpAjax({controller:"popup",action:"get_shortcode_builder"},function(e){n.setContent(e),MP_RM_Registry._get("MP_RM_Functions").showBlocks("mprm_categories"),r(),o(),i(),a(function(e){var r=wp.shortcode.string({tag:e.name,attrs:e.attrs,type:"single"});t.insertContent(r),n.close()})},function(e){console.warn(e)})},{title:s,width:500,height:600})}})})}(window.jQuery);
