!function(n){"use strict";tinymce.PluginManager.add("mp_restaurant_menu",function(e,t){function o(){n(document).on("change","[name=shortcode_name]",function(){var e=n(this).val();a(e)})}function a(e){_.isUndefined(e)&&(e="categories");var t={action:"get_shortcode_by_type",controller:"popup",type:e};MP_RM_Registry._get("MP_RM_Functions").wpAjax(t,function(e){n("#mprm-shortcode-html-container").html(e.html)},function(n){console.warn("Some error!!!"),console.warn(n)})}function i(){n(document).on("change",'[name="view"]',function(){var e=n(this).val();"simple-list"==e?(n('[name="price_pos"]',".mprm-line").parents("div.mprm-line").removeClass("mprm-hidden"),n('[name="buy"]',".mprm-line").parents("div.mprm-line").addClass("mprm-hidden"),n('[name="categ_name"] option[value="with_img"]',".mprm-line").addClass("mprm-hidden")):(n('[name="price_pos"]',".mprm-line").parents("div.mprm-line").addClass("mprm-hidden"),n('[name="buy"]',".mprm-line").parents("div.mprm-line").removeClass("mprm-hidden"),n('[name="categ_name"] option[value="with_img"]',".mprm-line").removeClass("mprm-hidden"))})}function r(){n(document).on("click.insert","[data-selector=insert_shortcode]",function(){var t=c(n("[data-selector=shortcode-form]")),o=wp.shortcode.string({tag:t.name,attrs:t.attrs,type:"single"});e.insertContent(o),jbox.close()})}function m(){n(document).on("click",'[data-selector="shortcode-form"] input[type="checkbox"]',function(){n(this).attr("checked")?n(this).val("1"):n(this).val("0")})}function c(e){var t={attrs:{},name:""};return e.find("[data-selector=data-line]").each(function(e,o){if(n(o).is(":visible")){var a=n(o).find("[data-selector=form_data]");a.length&&(_.isArray(a.val())?t.attrs[a.attr("name")]=a.val().join(","):t.attrs[a.attr("name")]=_.isNull(a.val())?"":a.val())}}),t.name=n("[data-selector=shortcode_name]").val(),t}var s="Insert Restaurant Menu Shortcode";e.addButton("mp_add_menu",{title:s,image:t+"/../img/shortcode-icon.png",onclick:function(){MP_RM_Registry._get("MP_RM_Functions").callModal("",function(){window.jbox=this,MP_RM_Registry._get("MP_RM_Functions").wpAjax({controller:"popup",action:"get_shortcode_builder"},function(n){jbox.setContent(n)},function(n){console.warn(n)})},{title:s,width:500,height:600})}}),o(),m(),i(),r()})}(window.jQuery);
